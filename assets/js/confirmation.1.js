!function(){"use strict";const e="confirmation-form";function t(e){let t;return Array.isArray(e)&&(t=new FormData,e.forEach((e=>{e.setAttribute("readonly",""),t.append(e.name,e.value)}))),Array.isArray(e)||null===e||"object"!=typeof e||(t=new FormData(e)),t.forEach(((e,t)=>{console.log(`serializeData: ${t} - ${e}`)})),t}async function o(e,t,o,r){let n=null;const c={headers:{"Content-type":"application/json; charset=UTF-8"},method:e};"POST"===e&&(c.body=JSON.stringify(t));try{const e=await fetch(o,c);return r&&(e.redirected&&(window.location.href=e.url),n=await e.json()),n}catch(e){return console.error(e),n}}function r(e,t){const o=t.closest(".form-control")?t.closest(".form-control").querySelector(".form-control__error"):t.closest(".form-select").querySelector(".form-select__error");o.textContent=e,o.classList.add("error_block","error_fade")}function n(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))t.forEach((t=>{t.removeAttribute("readonly"),e["error-info"].forEach((e=>{e["control-name"]===t.name?r(e["control-name"]===t.name?e["error-text"]:"Неизвестная ошибка",t):!o||void 0!==e["control-name"]&&"undefined"!==e["control-name"]||r("Неверный логин или пароль",o)}))}));else{const r=[];t.querySelectorAll("input").forEach((e=>{r.push(e)})),t.querySelectorAll("select").forEach((e=>{r.push(e)})),n(e,r,o)}}function c(t,o){!function(e){return!(!e.status||"success"!==e.status)}(t)?n(t,o):window.location.href=document.getElementById(e).dataset.locationHref}const l=function(e){const t=[];return["input","select"].forEach((o=>{e.querySelectorAll(o).forEach((e=>{t.push(e)}))})),t}(document.getElementById(e)),a=document.getElementById("confirmation-code");a.addEventListener("input",(()=>{var e;!function(e){if("checkbox"===e.type)return;const t=e.closest(".form-control")?e.closest(".form-control").querySelector(".form-control__error"):e.closest(".form-select").querySelector(".form-select__error");t.classList.contains("error_fade")&&t.classList.contains("error_block")&&(t.classList.remove("error_fade"),t.classList.remove("error_block"),t.textContent="")}(a),(e=a).value=e.value.replace(/[^0-9+]/g,"")})),document.getElementById("confirmation-forward-button").addEventListener("click",(()=>{a.value.length&&a.value.length<=8?async function(e,r,n,c,l){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const s=t(e),i=await o(r,s,n,l);c(i,e,a)}(l,"POST","http://localhost:4000/endpoint",c,!0):a.value.length?r("Некорректное значение поля",a):r("Введите код",a)}))}();
!function(){var e={4110:function(){document.querySelectorAll('input[type="password"]').forEach((e=>{const r=e.closest(".form-control").querySelector(".form-control__password-toggle");r.addEventListener("click",(()=>{"password"===e.type?(r.classList.remove("form-control__password-toggle_password"),e.type="text"):(r.classList.add("form-control__password-toggle_password"),e.type="password")}))}))}},r={};function t(o){var n=r[o];if(void 0!==n)return n.exports;var s=r[o]={exports:{}};return e[o](s,s.exports,t),s.exports}!function(){"use strict";const e="new-password-confirmation-code",r="new-password-password",o="new-password-password-repeat";function n(e,r){const t=r.closest(".form-control")?r.closest(".form-control").querySelector(".form-control__error"):r.closest(".form-select").querySelector(".form-select__error");t.textContent=e,t.classList.add("error_block","error_fade")}function s(e){let r;return Array.isArray(e)&&(r=new FormData,e.forEach((e=>{e.setAttribute("readonly",""),r.append(e.name,e.value)}))),Array.isArray(e)||null===e||"object"!=typeof e||(r=new FormData(e)),r.forEach(((e,r)=>{console.log(`serializeData: ${r} - ${e}`)})),r}async function c(e,r,t,o){let n=null;const s={headers:{"Content-type":"application/json; charset=UTF-8"},method:e};"POST"===e&&(s.body=JSON.stringify(r));try{const e=await fetch(t,s);return o&&(e.redirected&&(window.location.href=e.url),n=await e.json()),n}catch(e){return console.error(e),n}}function a(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(r))r.forEach((r=>{r.removeAttribute("readonly"),e["error-info"].forEach((e=>{e["control-name"]===r.name?n(e["control-name"]===r.name?e["error-text"]:"Неизвестная ошибка",r):!t||void 0!==e["control-name"]&&"undefined"!==e["control-name"]||n("Неверный логин или пароль",t)}))}));else{const o=[];r.querySelectorAll("input").forEach((e=>{o.push(e)})),r.querySelectorAll("select").forEach((e=>{o.push(e)})),a(e,o,t)}}function l(e,r){(function(e){return!(!e.status||"success"!==e.status)})(e)||a(e,r)}t(4110);const u=function(e){const r=[];return["input","select"].forEach((t=>{e.querySelectorAll(t).forEach((e=>{r.push(e)}))})),r}(document.getElementById("new-password-form"));u.forEach((r=>{r.addEventListener("input",(r=>{!function(e){if("checkbox"===e.type)return;const r=e.closest(".form-control")?e.closest(".form-control").querySelector(".form-control__error"):e.closest(".form-select").querySelector(".form-select__error");r.classList.contains("error_fade")&&r.classList.contains("error_block")&&(r.classList.remove("error_fade"),r.classList.remove("error_block"),r.textContent="")}(r.target),r.target.id===e&&function(e){e.value=e.value.replace(/[^0-9+]/g,"")}(r.target)}))})),document.getElementById("new-password-change-password-button").addEventListener("click",(()=>{(function(t){let s=!0;return t.forEach((t=>{t.id===e&&(t.value.length&&t.value.length<=8||(s=!1,t.value.length?n("Некорректное значение поля",t):n("Введите код",t))),t.id===r&&(function(e){return e.value.length>=6}(t)||(s=!1,n("Пароль не может быть короче 6 символов",t))),t.id===o&&t.value!==document.getElementById(r).value&&(s=!1,n("Пароли не совпадают",t))})),s})(u)&&async function(e,r,t,o,n){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const l=s(e),u=await c(r,l,t,n);o(u,e,a)}(u,"POST","./auth/?change_password=yes",l,!0)}))}()}();
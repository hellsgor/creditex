!function(){var t={5165:function(){document.querySelectorAll(".card-issued__numbers").forEach((t=>{const e=Array.from(t.querySelectorAll("span"))[2];e.textContent=new Intl.NumberFormat("ru-RU").format(Number(e.textContent))}))}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}!function(){"use strict";!function(){const t=document.querySelectorAll(".header__main-menu-item-link");if("/"!==window.location.pathname){for(let e=1;e<=t.length;e++)if(window.location.pathname.includes(t[e].dataset.pathname)){t[e].classList.add("header__main-menu-item-link_this-page");break}}else t[0].classList.add("header__main-menu-item-link_this-page")}();const t={VALID_PHONE:/^\+?\d{11,13}$/},e="Некорректный номер телефона";const o=document.getElementById("offer-phone"),a=document.getElementById("offer-button");function r(t,e,n,o,a){const r=t%100;let l;if(r>=11&&r<=19)l=o;else switch(t%10){case 1:l=e;break;case 2:case 3:case 4:l=n;break;default:l=o}return a?`${t} ${l}`:l}function l(t,e){const n=t.toString().replace(/\s/g,"");return e?r(Number(n),"месяц","месяца","месяцев",!0):Number(n).toLocaleString("ru-RU",{style:"decimal"})}function c(t,e,n){e.value=l(t.value,"true"===t.dataset.isYears),n.style.width=function(t){return(t.value-t.min)/(t.max-t.min)*100+"%"}(t)}!function(){function t(t){return t.value.replace(/\D/g,"")}function e(e){const n=e.target,o=t(n),a=e.clipboardData||window.clipboardData;if(a){const t=a.getData("Text");/\D/g.test(t)&&(n.value=o)}}function n(e){const n=e.target;let o=t(n);const{selectionStart:a}=n;let r="";if(!o)return n.value="","";if(n.value.length===a){if(["7","8","9"].indexOf(o[0])>-1){"9"===o[0]&&(o=`7${o}`);const t=(o[0],"+7");r=`${t} `,n.value=`${t} `,o.length>1&&(r+=`(${o.substring(1,4)}`),o.length>=5&&(r+=`) ${o.substring(4,7)}`),o.length>=8&&(r+=`-${o.substring(7,9)}`),o.length>=10&&(r+=`-${o.substring(9,11)}`)}else r=`+${o.substring(0,16)}`;n.value=r}else e.data&&/\D/g.test(e.data)&&(n.value=o)}function o(t){const e=t.target.value.replace(/\D/g,"");8===t.keyCode&&1===e.length&&(t.target.value="")}document.querySelectorAll('input[type="tel"]').forEach((t=>{t.addEventListener("keydown",o),t.addEventListener("input",n,!1),t.addEventListener("paste",e,!1)}))}(),a.addEventListener("click",(n=>{n.preventDefault(),function(n){var o;n.value?(o=n,t.VALID_PHONE.test(o.value.toString().replace(/[^\d]/g,""))?(async function(t,e,n){try{await fetch("./",{headers:{"Content-type":"application/json; charset=UTF-8"},method:"GET"})}catch(t){console.error(t)}}(function(t){let e;Array.isArray(t)&&(e=new FormData,t.forEach((t=>{t.setAttribute("readonly",""),e.append(t.name,t.value)}))),Array.isArray(t)||null!==!t||"object"!=typeof t||(e=new FormData(t))}([n])),window.location.href=`./registration.html?phoneNumber=${encodeURIComponent(n.value.toString().replace(/[^\d]/g,""))}`):function(t,e){const n=e.closest(".form-control").querySelector(".form-control__error");n.textContent=t,n.classList.add("error_block","error_fade")}(e,n)):window.location.href="./registration.html"}(o)})),o.addEventListener("input",(()=>{!function(t){const e=t.closest(".form-control").querySelector(".form-control__error");e.classList.remove("error_fade"),window.setTimeout((()=>{e.classList.remove("error_block"),e.textContent=""}),300)}(o)})),n(5165),document.querySelectorAll(".range").forEach((t=>{const e=t.querySelector('input[type="text"]'),n=t.querySelector('input[type="range"]'),o=t.querySelector(".range__custom-track"),a=t.querySelector(".range__min"),u=t.querySelector(".range__max");"true"===n.dataset.isYears&&(n.min*=12,n.max*=12,n.dataset.startValue*=12),[a,u].forEach((t=>{t.textContent=l(t.textContent)})),n.dataset.startValue&&(n.value=n.dataset.startValue),c(n,e,o),t.querySelectorAll(".range__postfix").forEach((n=>{n.textContent=r(Number(n.dataset.minPostfix?t.querySelector(".range__min").textContent:t.querySelector(".range__max").textContent),e.dataset.pluralizeOne,e.dataset.pluralizeTwo,e.dataset.pluralizeFive,!1)})),["input","change"].forEach((t=>{n.addEventListener(t,(()=>{c(n,e,o)}))}))}));const u="range-control-calculator-amount",i="form-control-calculator-payment",s="range-control-calculator-term",d="range-control-text-calculator-amount",m="range-control-text-calculator-term";function f(t,e,n){const o=function(t,e){const n=.0075,o=e,a=n*1.0075**o/(1.0075**o-1),r=[];let l=t,c=0;for(let e=1;e<=o;e++){const o=l*n,u=a*t-o;l-=u;const i=u+o;r.push({month:e,mainDebt:`${(u/i*100).toFixed(2)}%`,percents:`${(o/i*100).toFixed(2)}%`,paymentAmount:i.toFixed(2),principalPayment:u.toFixed(2),interestPayment:o.toFixed(2)}),c+=i}return{loanAmount:t,loanTerm:e,totalLoanWithInterest:c.toFixed(2),payments:r}}(t.value,n.value);return e.value=`${l(Math.round(o.payments[0].paymentAmount))} ${r(Math.round(o.payments[0].paymentAmount),"рубль","рубля","рублей",!1)}`,o}function p(t,e){0!==t.childElementCount&&(t.innerHTML=""),e.payments.forEach((e=>{const n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div");n.classList.add("calculator__payment-column"),o.classList.add("calculator__main-debt"),o.style.height=`${e.mainDebt}`,a.classList.add("calculator__percent-column"),a.style.height=`${e.percents}`,n.append(a),n.append(o),t.append(n)}))}function h(t,e){let n=null;return t.id===d&&(n=e.amountControl),t.id===m&&(n=e.termControl),n}const y=document.getElementById("calculator-graph"),g={amountControl:document.getElementById(u),paymentControl:document.getElementById(i),termControl:document.getElementById(s)},v={amountTextControl:document.getElementById(d),termTextControl:document.getElementById(m)};p(y,f(g.amountControl,g.paymentControl,g.termControl)),[v.amountTextControl,v.termTextControl].forEach((t=>{t&&t.addEventListener("focus",(t=>{const{target:e}=t,n=h(e,g);e.value=n.value,g.paymentControl.value=""}))})),[v.amountTextControl,v.termTextControl].forEach((t=>{t&&function(t,e){["change","blur","keydown"].forEach((n=>{t.addEventListener(n,(t=>{const{target:o,keyCode:a}=t,c=h(o,e);c&&(("change"===n||"blur"===n)&&Number(o.value)<=Number(c.max)&&Number(o.value)>=Number(c.min)?("change"===n&&(c.value=o.value,c.dispatchEvent(new Event("input"))),o.id===m&&"blur"===n&&(o.value=r(o.value,"месяц","месяца","месяцев",!0)),o.id===d&&(o.value=l(o.value)),f(e.amountControl,e.paymentControl,e.termControl)):"keydown"===n&&13===a&&o.blur())}))}))}(t,g)})),[g.amountControl,g.termControl].forEach((t=>{t&&t.addEventListener("input",(()=>{p(y,f(g.amountControl,g.paymentControl,g.termControl))}))})),document.querySelectorAll(".block-with-tabs").forEach((t=>function(t){const e=t.querySelectorAll(".tab"),n=t.querySelector(".block-with-tabs__tabs-inner"),o=t.querySelectorAll(".tab__content");!function(t,n,o,a){function r(t){for(let n=t;n<o.length;n++)e[n].classList.remove("tab_active","tab_hidden-after"),o[n].classList.add("tab__content_hide")}r(1),n.addEventListener("click",(n=>{const{target:a}=n;if(a&&a.classList.contains("tab"))for(let n=0;n<t.length;n++)if(a===t[n]){r(0),o[l=n].classList.contains("tab__content_hide")&&(o[l].classList.remove("tab__content_hide"),e[l].classList.add("tab_active"),l>0&&e[l-1].classList.add("tab_hidden-after"));break}var l}))}(e,n,o)}(t)))}()}();
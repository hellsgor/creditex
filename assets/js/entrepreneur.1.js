!function(){var t={5165:function(){document.querySelectorAll(".card-issued__numbers").forEach((t=>{const e=Array.from(t.querySelectorAll("span"))[2];e.textContent=new Intl.NumberFormat("ru-RU").format(Number(e.textContent))}))}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,n),r.exports}!function(){"use strict";!function(){const t=document.querySelectorAll(".header__main-menu-item-link");if("/"!==window.location.pathname){for(let e=1;e<=t.length;e++)if(window.location.pathname.includes(t[e].dataset.pathname)){t[e].classList.add("header__main-menu-item-link_this-page");break}}else t[0].classList.add("header__main-menu-item-link_this-page")}();const t={VALID_PHONE:/^\+?\d{11,13}$/},e="Некорректный номер телефона";const a=document.getElementById("offer-phone"),o=document.getElementById("offer-button");function r(t,e,n,a,o){const r=t%100;let l;if(r>=11&&r<=19)l=a;else switch(t%10){case 1:l=e;break;case 2:case 3:case 4:l=n;break;default:l=a}return o?`${t} ${l}`:l}function l(t,e){return e?r(Number(t),"месяц","месяца","месяцев",!0):Number(t).toLocaleString("ru-RU",{style:"decimal"})}function c(t,e,n){e.value=l(t.value,"true"===t.dataset.isYears),n.style.width=function(t){return(t.value-t.min)/(t.max-t.min)*100+"%"}(t)}!function(){function t(t){return t.value.replace(/\D/g,"")}function e(e){const n=e.target,a=t(n),o=e.clipboardData||window.clipboardData;if(o){const t=o.getData("Text");/\D/g.test(t)&&(n.value=a)}}function n(e){const n=e.target;let a=t(n);const{selectionStart:o}=n;let r="";if(!a)return n.value="","";if(n.value.length===o){if(["7","8","9"].indexOf(a[0])>-1){"9"===a[0]&&(a=`7${a}`);const t=(a[0],"+7");r=`${t} `,n.value=`${t} `,a.length>1&&(r+=`(${a.substring(1,4)}`),a.length>=5&&(r+=`) ${a.substring(4,7)}`),a.length>=8&&(r+=`-${a.substring(7,9)}`),a.length>=10&&(r+=`-${a.substring(9,11)}`)}else r=`+${a.substring(0,16)}`;n.value=r}else e.data&&/\D/g.test(e.data)&&(n.value=a)}function a(t){const e=t.target.value.replace(/\D/g,"");8===t.keyCode&&1===e.length&&(t.target.value="")}document.querySelectorAll('input[type="tel"]').forEach((t=>{t.addEventListener("keydown",a),t.addEventListener("input",n,!1),t.addEventListener("paste",e,!1)}))}(),o.addEventListener("click",(n=>{n.preventDefault(),function(n){var a;n.value?(a=n,t.VALID_PHONE.test(a.value.toString().replace(/[^\d]/g,""))?(async function(t,e,n){try{await fetch("./",{headers:{"Content-type":"application/json; charset=UTF-8"},method:"GET"})}catch(t){console.error(t)}}(function(t){let e;Array.isArray(t)&&(e=new FormData,t.forEach((t=>{t.setAttribute("readonly",""),e.append(t.name,t.value)}))),Array.isArray(t)||null!==!t||"object"!=typeof t||(e=new FormData(t))}([n])),window.location.href=`./registration.html?phoneNumber=${encodeURIComponent(n.value.toString().replace(/[^\d]/g,""))}`):function(t,e){const n=e.closest(".form-control").querySelector(".form-control__error");n.textContent=t,n.classList.add("error_block","error_fade")}(e,n)):window.location.href="./registration.html"}(a)})),a.addEventListener("input",(()=>{!function(t){const e=t.closest(".form-control").querySelector(".form-control__error");e.classList.remove("error_fade"),window.setTimeout((()=>{e.classList.remove("error_block"),e.textContent=""}),300)}(a)})),n(5165),document.querySelectorAll(".range").forEach((t=>{const e=t.querySelector('input[type="text"]'),n=t.querySelector('input[type="range"]'),a=t.querySelector(".range__custom-track"),o=t.querySelector(".range__min"),i=t.querySelector(".range__max");"true"===n.dataset.isYears&&(n.min*=12,n.max*=12,n.dataset.startValue*=12),[o,i].forEach((t=>{t.textContent=l(t.textContent)})),n.dataset.startValue&&(n.value=n.dataset.startValue),c(n,e,a),t.querySelectorAll(".range__postfix").forEach((n=>{n.textContent=r(Number(n.dataset.minPostfix?t.querySelector(".range__min").textContent:t.querySelector(".range__max").textContent),e.dataset.pluralizeOne,e.dataset.pluralizeTwo,e.dataset.pluralizeFive,!1)})),["input","change"].forEach((t=>{n.addEventListener(t,(()=>{c(n,e,a)}))}))}));const i="range-control-calculator-amount",s="range-control-calculator-payment",u="range-control-calculator-term";function m(t,e){const n=.0075,a=e,o=n*1.0075**a/(1.0075**a-1),r=[];let l=t,c=0;for(let e=1;e<=a;e++){const a=l*n,i=o*t-a;l-=i;const s=i+a;r.push({month:e,mainDebt:`${(i/s*100).toFixed(2)}%`,percents:`${(a/s*100).toFixed(2)}%`,paymentAmount:s.toFixed(2),principalPayment:i.toFixed(2),interestPayment:a.toFixed(2)}),c+=s}return{loanAmount:t,loanTerm:e,totalLoanWithInterest:c.toFixed(2),payments:r}}function d(t,e){0!==t.childElementCount&&(t.innerHTML=""),e.payments.forEach((e=>{const n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");n.classList.add("calculator__payment-column"),a.classList.add("calculator__main-debt"),a.style.height=`${e.mainDebt}`,o.classList.add("calculator__percent-column"),o.style.height=`${e.percents}`,n.append(o),n.append(a),t.append(n)}))}const p=document.getElementById("calculator-graph"),f={amountControl:document.getElementById(i),paymentControl:document.getElementById(s),termControl:document.getElementById(u)};d(p,function(t,e,n){const a=m(t.value,n.value);return e.value=Number(a.payments[0].paymentAmount),e.dispatchEvent(new Event("change")),a}(f.amountControl,f.paymentControl,f.termControl)),[f.amountControl,f.paymentControl,f.termControl].forEach((t=>{t&&t.addEventListener("input",(t=>{d(p,function(t,e){let n={};return n=m(e.amountControl.value,e.termControl.value),t.name===i&&(e.paymentControl.value=m(e.amountControl.value,e.termControl.value).payments[0].paymentAmount,e.paymentControl.dispatchEvent(new Event("input"))),t.name===u&&(e.paymentControl.value=m(e.amountControl.value,e.termControl.value).payments[0].paymentAmount,e.paymentControl.dispatchEvent(new Event("input"))),n}(t.target,f))}))})),document.querySelectorAll(".block-with-tabs").forEach((t=>function(t){const e=t.querySelectorAll(".tab"),n=t.querySelector(".block-with-tabs__tabs-inner"),a=t.querySelectorAll(".tab__content");!function(t,n,a,o){function r(t){for(let n=t;n<a.length;n++)e[n].classList.remove("tab_active","tab_hidden-after"),a[n].classList.add("tab__content_hide")}r(1),n.addEventListener("click",(n=>{const{target:o}=n;if(o&&o.classList.contains("tab"))for(let n=0;n<t.length;n++)if(o===t[n]){r(0),a[l=n].classList.contains("tab__content_hide")&&(a[l].classList.remove("tab__content_hide"),e[l].classList.add("tab_active"),l>0&&e[l-1].classList.add("tab_hidden-after"));break}var l}))}(e,n,a)}(t)))}()}();
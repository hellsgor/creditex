!function(){var t={4110:function(){document.querySelectorAll('input[type="password"]').forEach((t=>{const e=t.closest(".form-control").querySelector(".form-control__password-toggle");e.addEventListener("click",(()=>{"password"===t.type?(e.classList.remove("form-control__password-toggle_password"),t.type="text"):(e.classList.add("form-control__password-toggle_password"),t.type="password")}))}))}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var c=e[r]={exports:{}};return t[r](c,c.exports,o),c.exports}!function(){"use strict";o(4110),function(){function t(t){return t.value.replace(/\D/g,"")}function e(e){const o=e.target,r=t(o),n=e.clipboardData||window.clipboardData;if(n){const t=n.getData("Text");/\D/g.test(t)&&(o.value=r)}}function o(e){const o=e.target;let r=t(o);const{selectionStart:n}=o;let c="";if(!r)return o.value="","";if(o.value.length===n){if(["7","8","9"].indexOf(r[0])>-1){"9"===r[0]&&(r=`7${r}`);const t=(r[0],"+7");c=`${t} `,o.value=`${t} `,r.length>1&&(c+=`(${r.substring(1,4)}`),r.length>=5&&(c+=`) ${r.substring(4,7)}`),r.length>=8&&(c+=`-${r.substring(7,9)}`),r.length>=10&&(c+=`-${r.substring(9,11)}`)}else c=`+${r.substring(0,16)}`;o.value=c}else e.data&&/\D/g.test(e.data)&&(o.value=r)}function r(t){const e=t.target.value.replace(/\D/g,"");8===t.keyCode&&1===e.length&&(t.target.value="")}document.querySelectorAll('input[type="tel"]').forEach((t=>{t.addEventListener("keydown",r),t.addEventListener("input",o,!1),t.addEventListener("paste",e,!1)}))}();const t="authorization-form",e={VALID_PHONE:/^\+?\d{11,13}$/};function r(t){return e.VALID_PHONE.test(t.value.toString().replace(/[^\d]/g,""))}function n(t){return t.value.length>=6}function c(t,e){const o=e.closest(".form-control")?e.closest(".form-control").querySelector(".form-control__error"):e.closest(".form-select").querySelector(".form-select__error");o.textContent=t,o.classList.add("error_block","error_fade")}function s(t){if("checkbox"===t.type)return;const e=t.closest(".form-control")?t.closest(".form-control").querySelector(".form-control__error"):t.closest(".form-select").querySelector(".form-select__error");e.classList.contains("error_fade")&&e.classList.contains("error_block")&&(e.classList.remove("error_fade"),e.classList.remove("error_block"),e.textContent="")}function l(t){let e;return Array.isArray(t)&&(e=new FormData,t.forEach((t=>{t.setAttribute("readonly",""),e.append(t.name,t.value)}))),Array.isArray(t)||null===t||"object"!=typeof t||(e=new FormData(t)),e.forEach(((t,e)=>{console.log(`serializeData: ${e} - ${t}`)})),e}async function a(t,e,o,r){let n=null;const c={headers:{"Content-type":"application/json; charset=UTF-8"},method:t};"POST"===t&&(c.body=JSON.stringify(e));try{const t=await fetch(o,c);return r&&(t.redirected&&(window.location.href=t.url),n=await t.json()),n}catch(t){return console.error(t),n}}function u(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(e))e.forEach((e=>{e.removeAttribute("readonly"),t["error-info"].forEach((t=>{t["control-name"]===e.name?c(t["control-name"]===e.name?t["error-text"]:"Неизвестная ошибка",e):!o||void 0!==t["control-name"]&&"undefined"!==t["control-name"]||c("Неверный логин или пароль",o)}))}));else{const r=[];e.querySelectorAll("input").forEach((t=>{r.push(t)})),e.querySelectorAll("select").forEach((t=>{r.push(t)})),u(t,r,o)}}function i(t){return!(!t.status||"success"!==t.status)}function d(e,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(e)?window.location.href=document.getElementById(t).dataset.locationHref:u(e,o,r)}const f=document.getElementById(t),m=document.getElementById("auth-phone"),p=document.getElementById("auth-password"),g=function(t){const e=[];return["input","select"].forEach((o=>{t.querySelectorAll(o).forEach((t=>{e.push(t)}))})),e}(f);g.forEach((t=>{t.addEventListener("input",(()=>{s(t)}))})),document.getElementById("auth-come-in-button").addEventListener("click",(t=>{t.preventDefault(),g.forEach((t=>{s(t)})),r(m)||c("Некорректный номер телефона",m),n(p)||c("Некорректное значение поля",p),r(m)&&n(p)&&async function(t,e,o,r,n){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const s=l(t),u=await a(e,s,o,n);r(u,t,c)}(f,"POST","./auth/",d,!0,p)}))}()}();
"use strict";(self.webpackChunkmywebpack=self.webpackChunkmywebpack||[]).push([[427],{5994:function(e,t,n){function r(e,t){let n=!1;for(const r of t.files)e.name===r.name&&e.size===r.size&&(n=!0);return n}function o(e,t){for(let n=e.length-1;n>=0;n--)r(e[n],t)&&e.splice(n,1);return e}var s=n(3773),a=n(8950),l=n(9652);function i(e,t){t.classList.remove("form-file-upload__text_hidden"),e.classList.add("form-file-upload__text_hidden")}async function c(e,t){const n=e.closest(".form-file-upload"),r=n.querySelector("#loaded"),o=n.querySelector("#empty"),a=n.querySelector("#loaded-file-template"),l=n.querySelector("#preview");r.innerHTML="",l.innerHTML="";const c=[...e.files].map((async n=>{const o=n.name.split(".").pop().toLowerCase();r.append(function(e,t,n,r){const o=t.content.cloneNode(!0).querySelector(".form-file-upload__loaded-file");o.dataset.fileName=`${e.name}`,o.querySelector("p").textContent=`${e.name} (${(e.size/1024/1024).toFixed(2)} Мбайт)`;const a=o.querySelector(".form-file-upload__delete");return a.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),(0,s.q)(n),function(e,t,n){const r=e.closest(".form-file-upload"),{fileName:o}=t.closest(".form-file-upload__loaded-file").dataset,s=new DataTransfer,a=r.querySelector("#preview");Array.from(e.files).filter((e=>e.name!==o)).forEach((e=>{s.items.add(e)})),e.files=s.files,n&&r.querySelector("#preview").querySelectorAll("img").forEach((e=>{e.dataset.fileName===o&&e.remove()})),t.closest(".form-file-upload__loaded-file").remove(),e.files.length||i(e.closest(".form-file-upload").querySelector("#loaded"),e.closest(".form-file-upload").querySelector("#empty")),a.querySelectorAll("img").length||a.classList.add("visually-hidden")}(n,a,r)})),o}(n,a,e,t)),(n.type.startsWith("image/")||["jpg","jpeg","png"].includes(o))&&t&&await function(e,t,n){return new Promise(((e,r)=>{const o=new FileReader;o.onload=function(r){const o=new Image;o.classList.add("form-file-upload__preview-item"),o.dataset.fileName=t.name,o.src=r.target.result,n.append(o),e()},o.onerror=function(e){r(e)},o.readAsDataURL(t)}))}(0,n,l)}));var u;e.files.length?(u=o,r.classList.remove("form-file-upload__text_hidden"),u.classList.add("form-file-upload__text_hidden")):i(r,o),await Promise.all(c),l.querySelectorAll("img").length?l.classList.remove("visually-hidden"):l.classList.add("visually-hidden")}function u(e,t,n){(0,s.q)(e),e.multiple||(e.value="",e.closest(".form-file-upload").querySelector("#loaded").innerHTML="",t.length>1&&((0,a.x)(l.S.CE012(t[0]),e),t=[t[0]])),function(e,t){let n=!0;return e.forEach((e=>function(e,t){return!!t.accept.split(", ").includes(`.${e.name.split(".").pop().toLowerCase()}`)||((0,a.x)(l.S.CE010(e),t),!1)}(e,t)&&function(e,t){return!(e.size>t.size&&((0,a.x)(l.S.CE011(e),t),1))}(e,t)?void 0:n=!1)),n}(t,e)&&(function(e,t){const n=new DataTransfer;Array.from(t.files).concat(...e).forEach((e=>{n.items.add(new File([e],e.name))})),t.files=n.files}(t,e),c(e,n))}const d=document.querySelectorAll('input[type="file"]:not([hidden])');["dragover","drop"].forEach((e=>{document.addEventListener(e,(e=>(e.preventDefault(),!1)))})),d.forEach((e=>{const t=e.closest("#drop-zone"),n="true"===e.dataset.isPreview,r=t.querySelector(`#${e.id}-buffer`);t.addEventListener("drop",(t=>{const r=o([...t.dataTransfer.files],e);u(e,r,n)})),r.addEventListener("change",(()=>{if(r.files.length){const t=o([...r.files],e);r.value="",u(e,t,n)}}))}))},2407:function(e,t,n){n.d(t,{z:function(){return s}});var r=n(3959),o=n(3022);function s(e,t,n){t.value=(0,r.i)(e.value,"true"===e.dataset.isYears),n.style.width=(0,o.W)(e)}},3022:function(e,t,n){function r(e){return(e.value-e.min)/(e.max-e.min)*100+"%"}n.d(t,{W:function(){return r}})},161:function(e,t,n){var r=n(3959),o=n(8849),s=n(2407);document.querySelectorAll(".range").forEach((e=>{const t=e.querySelector('input[type="text"]'),n=e.querySelector('input[type="range"]'),a=e.querySelector(".range__custom-track"),l=e.querySelector(".range__min"),i=e.querySelector(".range__max");"true"===n.dataset.isYears&&(n.min*=12,n.max*=12,n.dataset.startValue*=12),[l,i].forEach((e=>{e.textContent=(0,r.i)(e.textContent)})),n.dataset.startValue&&(n.value=n.dataset.startValue),(0,s.z)(n,t,a),e.querySelectorAll(".range__postfix").forEach((n=>{n.textContent=(0,o.L)(Number(n.dataset.minPostfix?e.querySelector(".range__min").textContent:e.querySelector(".range__max").textContent),t.dataset.pluralizeOne,t.dataset.pluralizeTwo,t.dataset.pluralizeFive,!1)})),["input","change"].forEach((e=>{n.addEventListener(e,(()=>{(0,s.z)(n,t,a)}))})),t.addEventListener("focus",(()=>{t.value=n.value})),["change","blur","keydown"].forEach((e=>{t.addEventListener(e,(e=>{("change"===e.type||"blur"===e.type)&&Number(t.value)<=Number(n.max)&&Number(t.value)>=Number(n.min)&&("change"===e.type&&(n.value=t.value,n.dispatchEvent(new Event("input"))),"blur"===e.type&&(0,s.z)(n,t,a))}))}))}))},8245:function(e,t,n){n.d(t,{ps:function(){return o},sn:function(){return r}});const r={formId:"new-application-form",controlsIds:{userType:"user-type",inn:"inn",fio:"fio",email:"email",phoneNumber:"phone-number",card51:"card-51",financialStatements:"financial-statements",statementFromTheBank:"statement-from-the-bank",passport:"passport",passportSeries:"passport-series",passportNumber:"passport-number",passportIssued:"passport-issued",passportDate:"passport-date",passportFio:"passport-fio",bankStatement:"bank-statement",creditType:"credit-type",collateralType:"collateral-type"},buttons:{goToStep2:"go-to-step-2",returnToStep1:"return-to-step-1",skipToStep3:"skip-to-step-3",goToStep3:"go-to-step-3",returnToStep2:"return-to-step-2",sendFromBankClient:"send-from-bank-client",submit:"submit-form"},sections:{step1:"step-1",step2:"step-2",step3:"step-3",stepThanks:"thanks-step"},steps:{step1:"form-step-1",step2:"form-step-2",step3:"form-step-3"}},o={MIN_PASSWORD_LENGTH:6,MAX_SMS_CODE_LENGTH:8}},9652:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(8245);const o={CE001:()=>"Некорректный номер телефона",CE002:()=>"Некорректное значение поля",CE003:()=>"Неизвестная ошибка",CE004:()=>"Неверный логин или пароль",CE005:()=>`Пароль не может быть короче ${r.ps.MIN_PASSWORD_LENGTH} символов`,CE006:()=>"Пароли не совпадают",CE007:()=>"Выберите тип пользователя",CE008:()=>"Введите код",CE009:()=>"Некорректный адрес электронной почты",CE010:e=>`Тип файла ${e.name} не соответствует ожидаемым`,CE011:e=>`Размер файла ${e.name} превышает допустимый`,CE012:e=>`Ожидается один файл, а не несколько. Добавлен только ${e.name}`,CE013:()=>"Поле не может быть пустым",CE014:()=>"Выберите одно из значений",CE015:()=>"Сначала выберите форму регистрации"}},3543:function(e,t,n){n.d(t,{V:function(){return r}});const r={VALID_PHONE:/^\+?\d{11,13}$/,VALID_EMAIL:/[a-z0-9]+@[a-z0-9]+\.[a-z0-9]+/i,VALID_PASSPORT_SERIES:/^\d{4}$/,VALID_PASSPORT_NUMBER:/^\d{6}$/,VALID_DATE:/^(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[0-2])\.\d{4}$/,WINDOW_PATHNAME:/\/([^\/]+\.html)?$/}},9067:function(e,t,n){n.d(t,{h:function(){return i}});const r={STATUS:"success"};var o=n(9652),s=n(8950);function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))t.forEach((t=>{t.removeAttribute("readonly"),e["error-info"].forEach((e=>{e["control-name"]===t.name?(0,s.x)(e["control-name"]===t.name?e["error-text"]:o.S.CE003(),t):!n||void 0!==e["control-name"]&&"undefined"!==e["control-name"]||(0,s.x)(o.S.CE004(),n)}))}));else{const r=[];t.querySelectorAll("input").forEach((e=>{r.push(e)})),t.querySelectorAll("select").forEach((e=>{r.push(e)})),a(e,r,n)}}var l=n(4526);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e){return!(!e.status||e.status!==r.STATUS)}(e)?a(e,t,n):(0,l.U)(3,4)}},2598:function(e,t,n){n.d(t,{m:function(){return i}});var r=n(8950),o=n(9652),s=n(8245),a=n(3773),l=n(3543);function i(e){let t=!0;return e.forEach((e=>{(0,a.q)(e),e.id===s.sn.controlsIds.userType&&(e.value||(t=!1,(0,r.x)(o.S.CE014(),e))),e.id===s.sn.controlsIds.fio&&(e.value.trim()||(t=!1,(0,r.x)(o.S.CE002(),e))),e.id===s.sn.controlsIds.inn&&(e.value.trim()||(t=!1,(0,r.x)(o.S.CE013(),e)),e.value&&!document.getElementById(s.sn.controlsIds.userType).value&&(t=!1,(0,r.x)(o.S.CE015(),e)),"ooo"===document.getElementById(s.sn.controlsIds.userType).value&&10!==e.value.length&&(t=!1,(0,r.x)(o.S.CE002(),e)),"ip"===document.getElementById(s.sn.controlsIds.userType).value&&12!==e.value.length&&(t=!1,(0,r.x)(o.S.CE002(),e))),e.id===s.sn.controlsIds.email&&(function(e){return l.V.VALID_EMAIL.test(e.value.toLowerCase().trim())}(e)||(t=!1,(0,r.x)(o.S.CE009(),e))),e.id===s.sn.controlsIds.phoneNumber&&(function(e){return l.V.VALID_PHONE.test(e.value.toString().replace(/[^\d]/g,""))}(e)||(t=!1,(0,r.x)(o.S.CE001(),e)))})),t}},2803:function(e,t,n){n.d(t,{a:function(){return i}});var r=n(8245),o=n(8950),s=n(9652),a=n(3543),l=n(3773);function i(e){let t=!0;return e.forEach((e=>{(0,l.q)(e),e.id===r.sn.controlsIds.passport&&e.files.length<=0&&((0,o.x)(s.S.CE013(),e),t=!1),(e.id===r.sn.controlsIds.passportSeries||e.id===r.sn.controlsIds.passportNumber||e.id===r.sn.controlsIds.passportDate)&&((()=>{switch(e.id){case r.sn.controlsIds.passportNumber:return a.V.VALID_PASSPORT_NUMBER;case r.sn.controlsIds.passportDate:return a.V.VALID_DATE;default:return a.V.VALID_PASSPORT_SERIES}})().test(e.value)||((0,o.x)(s.S.CE002(),e),t=!1),e.value||((0,o.x)(s.S.CE013(),e),t=!1)),e.id!==r.sn.controlsIds.passportIssued&&e.id!==r.sn.controlsIds.passportFio||e.value||((0,o.x)(s.S.CE013(),e),t=!1)})),[document.getElementById(r.sn.controlsIds.creditType),document.getElementById(r.sn.controlsIds.collateralType)].map((e=>function(e){let t=!1;const n=e.querySelectorAll('input[type="radio"]');return n.forEach((e=>{e.checked&&(t=!0)})),{isChecked:t,control:n[0]}}(e))).forEach((e=>{e.isChecked||((0,o.x)(s.S.CE014(),e.control),t=!1)})),t}},4526:function(e,t,n){n.d(t,{U:function(){return s}});var r=n(8245);function o(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])switch(e){case 1:return r.sn.steps.step1;case 2:case 3:return r.sn.steps.step2;default:return r.sn.steps.step3}else switch(e){case 1:return r.sn.sections.step1;case 2:return r.sn.sections.step2;case 3:return r.sn.sections.step3;default:return r.sn.sections.stepThanks}}function s(e,t){document.getElementById(o(e)).classList.add("visually-hidden"),document.getElementById(o(t)).classList.remove("visually-hidden"),(1!==e&&2!==e||1!==t&&2!==t)&&(3!==e||4!==t)||(document.getElementById(o(e,!0)).classList.remove("form-step_active"),document.getElementById(o(t,!0)).classList.add("form-step_active")),window.scrollTo(0,0)}},2385:function(e,t,n){n.d(t,{M:function(){return o}});var r=n(8245);function o(e){const t=document.getElementById(r.sn.sections.step2);"ip"===e.value&&(t.querySelector(".new-application__ip").classList.remove("visually-hidden"),t.querySelector(".new-application__ooo").classList.add("visually-hidden")),"ooo"===e.value&&(t.querySelector(".new-application__ooo").classList.remove("visually-hidden"),t.querySelector(".new-application__ip").classList.add("visually-hidden"))}},5323:function(e,t,n){function r(e){if("checkbox"===e.type||"hidden"===e.type)return null;let t=null;return"radio"!==e.type?e.closest(".form-control")?t=e.closest(".form-control").querySelector(".form-control__error"):e.closest(".form-select")?t=e.closest(".form-select").querySelector(".form-select__error"):e.closest(".form-file-upload")&&(t=e.closest(".form-file-upload").querySelector(".form-file-upload__error")):"radio"===e.type&&(t=e.closest(".form-radio").querySelector(".error")),t}n.d(t,{f:function(){return r}})},3773:function(e,t,n){n.d(t,{q:function(){return o}});var r=n(5323);function o(e){const t=(0,r.f)(e);t&&t.classList.contains("error_fade")&&t.classList.contains("error_block")&&(t.classList.remove("error_fade"),t.classList.remove("error_block"),t.textContent="")}},8950:function(e,t,n){n.d(t,{x:function(){return o}});var r=n(5323);function o(e,t){const n=(0,r.f)(t);n&&(n.textContent=e,n.classList.add("error_block","error_fade"))}},1145:function(e,t,n){function r(e){const t=[];return["input","select"].forEach((n=>{e.querySelectorAll(n).forEach((e=>{t.push(e)}))})),t}n.d(t,{M:function(){return r}})},3959:function(e,t,n){n.d(t,{i:function(){return o}});var r=n(8849);function o(e,t){const n=e.toString().replace(/\s/g,"");return t?(0,r.L)(Number(n),"месяц","месяца","месяцев",!0):Number(n).toLocaleString("ru-RU",{style:"decimal"})}},4614:function(e,t,n){async function r(e,t,n,r){let o=null;const s={method:e.toUpperCase()};"POST"===s.method&&(s.body=t);try{const e=await fetch(n,s);return r&&(e.redirected&&(window.location.href=e.url),o=await e.json()),o}catch(e){return console.error(e),o}}n.d(t,{$:function(){return r}})},7836:function(e,t,n){function r(e){let t;return Array.isArray(e)&&(t=new FormData,e.forEach((e=>{e.setAttribute("readonly",""),t.append(e.name,e.value)}))),Array.isArray(e)||null===e||"object"!=typeof e||(t=new FormData(e)),t}n.d(t,{L:function(){return r}})},32:function(e,t,n){n.d(t,{x:function(){return s}});var r=n(7836),o=n(4614);async function s(e,t,n,s,a){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const i=(0,r.L)(e);s(await(0,o.$)(t,i,n,a),e,l)}},9465:function(e,t,n){function r(e){const t=e.value.replace(/\D/g,""),n=t.substring(0,2),r=t.substring(2,4),o=t.substring(4,8);e.value=`${n}.${r}.${o}`}n.d(t,{X:function(){return r}})},8121:function(e,t,n){function r(e){e.value=e.value.replace(/[^0-9+]/g,"")}n.d(t,{i:function(){return r}})},6608:function(e,t,n){function r(){function e(e){return e.value.replace(/\D/g,"")}function t(t){const n=t.target,r=e(n),o=t.clipboardData||window.clipboardData;if(o){const e=o.getData("Text");/\D/g.test(e)&&(n.value=r)}}function n(t){const n=t.target;let r=e(n);const{selectionStart:o}=n;let s="";if(!r)return n.value="","";if(n.value.length===o){if(["7","8","9"].indexOf(r[0])>-1){"9"===r[0]&&(r=`7${r}`);const e=(r[0],"+7");s=`${e} `,n.value=`${e} `,r.length>1&&(s+=`(${r.substring(1,4)}`),r.length>=5&&(s+=`) ${r.substring(4,7)}`),r.length>=8&&(s+=`-${r.substring(7,9)}`),r.length>=10&&(s+=`-${r.substring(9,11)}`)}else s=`+${r.substring(0,16)}`;n.value=s}else t.data&&/\D/g.test(t.data)&&(n.value=r)}function r(e){const t=e.target.value.replace(/\D/g,"");8===e.keyCode&&1===t.length&&(e.target.value="")}let o=[];o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||document.querySelectorAll('input[type="tel"]'),o.forEach((e=>{e.addEventListener("keydown",r),e.addEventListener("input",n,!1),e.addEventListener("paste",t,!1)}))}n.d(t,{D:function(){return r}}),r()},1604:function(e,t,n){function r(e,t){e.value=e.value.slice(0,t)}n.d(t,{h:function(){return r}})}}]);
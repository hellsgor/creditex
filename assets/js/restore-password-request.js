!function(){"use strict";function e(){function e(e){return e.value.replace(/\D/g,"")}function t(t){const r=t.target,o=e(r),n=t.clipboardData||window.clipboardData;if(n){const e=n.getData("Text");/\D/g.test(e)&&(r.value=o)}}function r(t){const r=t.target;let o=e(r);const{selectionStart:n}=r;let s="";if(!o)return r.value="","";if(r.value.length===n){if(["7","8","9"].indexOf(o[0])>-1){"9"===o[0]&&(o=`7${o}`);const e=(o[0],"+7");s=`${e} `,r.value=`${e} `,o.length>1&&(s+=`(${o.substring(1,4)}`),o.length>=5&&(s+=`) ${o.substring(4,7)}`),o.length>=8&&(s+=`-${o.substring(7,9)}`),o.length>=10&&(s+=`-${o.substring(9,11)}`)}else s=`+${o.substring(0,16)}`;r.value=s}else t.data&&/\D/g.test(t.data)&&(r.value=o)}function o(e){const t=e.target.value.replace(/\D/g,"");8===e.keyCode&&1===t.length&&(e.target.value="")}document.querySelectorAll('input[type="tel"]').forEach((e=>{e.addEventListener("keydown",o),e.addEventListener("input",r,!1),e.addEventListener("paste",t,!1)}))}e();function t(e){let t;return Array.isArray(e)&&(t=new FormData,e.forEach((e=>{e.setAttribute("readonly",""),t.append(e.name,e.value)}))),Array.isArray(e)||null===e||"object"!=typeof e||(t=new FormData(e)),t.forEach(((e,t)=>{console.log(`serializeData: ${t} - ${e}`)})),t}async function r(e,t,r,o){let n=null;const s={headers:{"Content-type":"application/json; charset=UTF-8"},method:e};"POST"===e&&(s.body=JSON.stringify(t));try{const e=await fetch(r,s);return o&&(e.redirected&&(window.location.href=e.url),n=await e.json()),n}catch(e){return console.error(e),n}}function o(e,t){const r=t.closest(".form-control")?t.closest(".form-control").querySelector(".form-control__error"):t.closest(".form-select").querySelector(".form-select__error");r.textContent=e,r.classList.add("error_block","error_fade")}const n={VALID_PHONE:/^\+?\d{11,13}$/};function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))t.forEach((t=>{t.removeAttribute("readonly"),e["error-info"].forEach((e=>{e["control-name"]===t.name?o(e["control-name"]===t.name?e["error-text"]:"Неизвестная ошибка",t):!r||void 0!==e["control-name"]&&"undefined"!==e["control-name"]||o("Неверный логин или пароль",r)}))}));else{const o=[];t.querySelectorAll("input").forEach((e=>{o.push(e)})),t.querySelectorAll("select").forEach((e=>{o.push(e)})),s(e,o,r)}}function c(e,t){(function(e){return!(!e.status||"success"!==e.status)})(e)||s(e,t)}const a=function(e){const t=[];return["input","select"].forEach((r=>{e.querySelectorAll(r).forEach((e=>{t.push(e)}))})),t}(document.getElementById("restore-password-request-form")),l=document.getElementById("restore-password-phone-number");e(),l.addEventListener("input",(()=>{!function(e){if("checkbox"===e.type)return;const t=e.closest(".form-control")?e.closest(".form-control").querySelector(".form-control__error"):e.closest(".form-select").querySelector(".form-select__error");t.classList.contains("error_fade")&&t.classList.contains("error_block")&&(t.classList.remove("error_fade"),t.classList.remove("error_block"),t.textContent="")}(l)})),document.getElementById("restore-password-request-forward-button").addEventListener("click",(()=>{var e;e=l,n.VALID_PHONE.test(e.value.toString().replace(/[^\d]/g,""))?async function(e,o,n,s,c){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const l=t(e),u=await r(o,l,n,c);s(u,e,a)}(a,"GET","./moc/restore-password-request-response-error.json",c,!0):o("Некорректный номер телефона",l)}))}();
!function(){"use strict";function e(){function e(e){return e.value.replace(/\D/g,"")}function t(t){const r=t.target,o=e(r),n=t.clipboardData||window.clipboardData;if(n){const e=n.getData("Text");/\D/g.test(e)&&(r.value=o)}}function r(t){const r=t.target;let o=e(r);const{selectionStart:n}=r;let l="";if(!o)return r.value="","";if(r.value.length===n){if(["7","8","9"].indexOf(o[0])>-1){"9"===o[0]&&(o=`7${o}`);const e=(o[0],"+7");l=`${e} `,r.value=`${e} `,o.length>1&&(l+=`(${o.substring(1,4)}`),o.length>=5&&(l+=`) ${o.substring(4,7)}`),o.length>=8&&(l+=`-${o.substring(7,9)}`),o.length>=10&&(l+=`-${o.substring(9,11)}`)}else l=`+${o.substring(0,16)}`;r.value=l}else t.data&&/\D/g.test(t.data)&&(r.value=o)}function o(e){const t=e.target.value.replace(/\D/g,"");8===e.keyCode&&1===t.length&&(e.target.value="")}let n=[];n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||document.querySelectorAll('input[type="tel"]'),n.forEach((e=>{e.addEventListener("keydown",o),e.addEventListener("input",r,!1),e.addEventListener("paste",t,!1)}))}e();function t(e){if("checkbox"===e.type||"hidden"===e.type)return null;let t=null;return"radio"!==e.type?e.closest(".form-control")?t=e.closest(".form-control").querySelector(".form-control__error"):e.closest(".form-select")?t=e.closest(".form-select").querySelector(".form-select__error"):e.closest(".form-file-upload")&&(t=e.closest(".form-file-upload").querySelector(".form-file-upload__error")):"radio"===e.type&&(t=e.closest(".form-radio").querySelector(".error")),t}function r(e,r){const o=t(r);o&&(o.textContent=e,o.classList.add("error_block","error_fade"))}const o={CE001:()=>"Некорректный номер телефона",CE002:()=>"Некорректное значение поля",CE003:()=>"Неизвестная ошибка",CE004:()=>"Неверный логин или пароль",CE005:()=>"Пароль не может быть короче 6 символов",CE006:()=>"Пароли не совпадают",CE007:()=>"Выберите тип пользователя",CE008:()=>"Введите код",CE009:()=>"Некорректный адрес электронной почты",CE010:e=>`Тип файла ${e.name} не соответствует ожидаемым`,CE011:e=>`Размер файла ${e.name} превышает допустимый`,CE012:e=>`Ожидается один файл, а не несколько. Добавлен только ${e.name}`,CE013:()=>"Поле не может быть пустым",CE014:()=>"Выберите одно из значений"},n={VALID_PHONE:/^\+?\d{11,13}$/,VALID_EMAIL:/[a-z0-9]+@[a-z0-9]+\.[a-z0-9]+/i,VALID_PASSPORT_SERIES:/^\d{4}$/,VALID_PASSPORT_NUMBER:/^\d{6}$/,VALID_DATE:/^(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[0-2])\.\d{4}$/},l="success";function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))t.forEach((t=>{t.removeAttribute("readonly"),e["error-info"].forEach((e=>{e["control-name"]===t.name?r(e["control-name"]===t.name?e["error-text"]:o.CE003(),t):!n||void 0!==e["control-name"]&&"undefined"!==e["control-name"]||r(o.CE004(),n)}))}));else{const r=[];t.querySelectorAll("input").forEach((e=>{r.push(e)})),t.querySelectorAll("select").forEach((e=>{r.push(e)})),a(e,r,n)}}function s(e,t){(function(e){return!(!e.status||e.status!==l)})(e)||a(e,t)}const c=document.getElementById("restore-password-request-form"),u=document.getElementById("restore-password-phone-number");e(),u.addEventListener("input",(()=>{!function(e){const r=t(e);r&&r.classList.contains("error_fade")&&r.classList.contains("error_block")&&(r.classList.remove("error_fade"),r.classList.remove("error_block"),r.textContent="")}(u)})),document.getElementById("restore-password-request-forward-button").addEventListener("click",(e=>{var t;e.preventDefault(),t=u,n.VALID_PHONE.test(t.value.toString().replace(/[^\d]/g,""))?async function(e,t,r,o,n){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const a=function(e){let t;return Array.isArray(e)&&(t=new FormData,e.forEach((e=>{e.setAttribute("readonly",""),t.append(e.name,e.value)}))),Array.isArray(e)||null===e||"object"!=typeof e||(t=new FormData(e)),t}(e),s=await async function(e,t,r,o){let n=null;const l={method:e.toUpperCase()};"POST"===l.method&&(l.body=t);try{const e=await fetch(r,l);return o&&(e.redirected&&(window.location.href=e.url),n=await e.json()),n}catch(e){return console.error(e),n}}(t,a,r,n);o(s,e,l)}(c,c.method,c.action,s,!0):r(o.CE001(),u)}))}();
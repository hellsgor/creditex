!function(){var e={4110:function(){document.querySelectorAll('input[type="password"]').forEach((e=>{const t=e.closest(".form-control").querySelector(".form-control__password-toggle");t.addEventListener("click",(()=>{"password"===e.type?(t.classList.remove("form-control__password-toggle_password"),e.type="text"):(t.classList.add("form-control__password-toggle_password"),e.type="password")}))}))}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}!function(){"use strict";const e="registration-form",t="registration-user-type",o="registration-inn",n="registration-phone",a="registration-password",l="registration-repeat-password",s="registration-remember-user";function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;function t(e){return e.value.replace(/\D/g,"")}function r(e){const r=e.target,o=t(r),n=e.clipboardData||window.clipboardData;if(n){const e=n.getData("Text");/\D/g.test(e)&&(r.value=o)}}function o(e){const r=e.target;let o=t(r);const{selectionStart:n}=r;let a="";if(!o)return r.value="","";if(r.value.length===n){if(["7","8","9"].indexOf(o[0])>-1){"9"===o[0]&&(o=`7${o}`);const e=(o[0],"+7");a=`${e} `,r.value=`${e} `,o.length>1&&(a+=`(${o.substring(1,4)}`),o.length>=5&&(a+=`) ${o.substring(4,7)}`),o.length>=8&&(a+=`-${o.substring(7,9)}`),o.length>=10&&(a+=`-${o.substring(9,11)}`)}else a=`+${o.substring(0,16)}`;r.value=a}else e.data&&/\D/g.test(e.data)&&(r.value=o)}function n(e){const t=e.target.value.replace(/\D/g,"");8===e.keyCode&&1===t.length&&(e.target.value="")}let a=[];a=e||document.querySelectorAll('input[type="tel"]'),a.forEach((e=>{e.addEventListener("keydown",n),e.addEventListener("input",o,!1),e.addEventListener("paste",r,!1)}))}function i(e){if("checkbox"===e.type||"hidden"===e.type)return null;let t=null;return"radio"!==e.type?e.closest(".form-control")?t=e.closest(".form-control").querySelector(".form-control__error"):e.closest(".form-select")?t=e.closest(".form-select").querySelector(".form-select__error"):e.closest(".form-file-upload")&&(t=e.closest(".form-file-upload").querySelector(".form-file-upload__error")):"radio"===e.type&&(t=e.closest(".form-radio").querySelector(".error")),t}function u(e,t){const r=i(t);r&&(r.textContent=e,r.classList.add("error_block","error_fade"))}r(4110),c();const d={VALID_PHONE:/^\+?\d{11,13}$/,VALID_EMAIL:/[a-z0-9]+@[a-z0-9]+\.[a-z0-9]+/i,VALID_PASSPORT_SERIES:/^\d{4}$/,VALID_PASSPORT_NUMBER:/^\d{6}$/,VALID_DATE:/^(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[0-2])\.\d{4}$/};function f(e){const t=i(e);t&&t.classList.contains("error_fade")&&t.classList.contains("error_block")&&(t.classList.remove("error_fade"),t.classList.remove("error_block"),t.textContent="")}function g(e){let t;return Array.isArray(e)&&(t=new FormData,e.forEach((e=>{e.setAttribute("readonly",""),t.append(e.name,e.value)}))),Array.isArray(e)||null===e||"object"!=typeof e||(t=new FormData(e)),t}async function p(e,t,r,o){let n=null;const a={method:e};"POST"===e&&(a.body=t);try{const e=await fetch(r,a);return o&&(e.redirected&&(window.location.href=e.url),n=await e.json()),n}catch(e){return console.error(e),n}}function m(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))t.forEach((t=>{t.removeAttribute("readonly"),e["error-info"].forEach((e=>{e["control-name"]===t.name?u(e["control-name"]===t.name?e["error-text"]:"Неизвестная ошибка",t):!r||void 0!==e["control-name"]&&"undefined"!==e["control-name"]||u("Неверный логин или пароль",r)}))}));else{const o=[];t.querySelectorAll("input").forEach((e=>{o.push(e)})),t.querySelectorAll("select").forEach((e=>{o.push(e)})),m(e,o,r)}}function v(t,r){!function(e){return!(!e.status||"success"!==e.status)}(t)?m(t,r):window.location.href=`${document.getElementById(e).dataset.locationHref}&signedData=${t.SIGNED_DATA?t.SIGNED_DATA:""}`}const y=function(e){const t=[];return["input","select"].forEach((r=>{e.querySelectorAll(r).forEach((e=>{t.push(e)}))})),t}(document.getElementById(e)),h=document.getElementById(n),E=document.getElementById(e);c(),h.value=new URLSearchParams(window.location.search).get("phoneNumber"),h.dispatchEvent(new Event("input")),y.forEach((e=>{e.id!==s&&e.addEventListener("input",(t=>{e.id===o&&function(e){e.value=e.value.replace(/[^0-9+]/g,"")}(t.target),f(e)}))})),document.getElementById("registration-come-in-button").addEventListener("click",(e=>{e.preventDefault(),function(e){let r=!0;return e.forEach((e=>{e.id===t&&(f(e),""===e.value&&(r=!1,u("Выберите тип пользователя",e))),e.id===o&&(f(e),10!==e.value.length&&12!==e.value.length&&(r=!1,u("Некорректное значение поля",e))),e.id===n&&(f(e),function(e){return d.VALID_PHONE.test(e.value.toString().replace(/[^\d]/g,""))}(e)||(r=!1,u("Некорректный номер телефона",e))),e.id===a&&(f(e),function(e){return e.value.length>=6}(e)||(r=!1,u("Пароль не может быть короче 6 символов",e))),e.id===l&&(f(e),document.getElementById(a).value!==e.value&&(r=!1,u("Пароли не совпадают",e)))})),r}(y)&&async function(e,t,r,o,n){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const l=g(e),s=await p(t,l,r,n);o(s,e,a)}(E,E.method,E.action,v,!0)}))}()}();